language: java
jdk: [oraclejdk8]
install: ant deps
script: ant testhalt
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libxml2-dev
  - sudo apt-get install scons
  - sudo apt-get install zlib1g-dev
  - sudo apt-get install unzip
  - wget -q https://www.free-decompiler.com/flash/nsis-3.0-src.tar.bz2
  - bzip2 -d nsis-3.0-src.tar.bz2
  - tar xvf nsis-3.0-src.tar -C ~ >/dev/null  
  - cd ~/nsis-3.0-src/  
  - scons UNICODE=yes SKIPSTUBS=all SKIPPLUGINS=all SKIPUTILS=all SKIPMISC=all NSIS_CONFIG_CONST_DATA=no PREFIX=~/nsis-3.0-src/ install-compiler
  - mkdir share
  - ln -s ~/nsis-3.0-src share/nsis
  - cd -  
  - wget -q https://www.free-decompiler.com/flash/nsis-3.0-stubs.zip
  - unzip nsis-3.0-stubs.zip -d ~/nsis-3.0-src/Stubs
  - wget -q https://www.free-decompiler.com/flash/launch4j-3.9-linux.tgz
  - tar zxvf launch4j-3.9-linux.tgz -C ~ >/dev/null
  - echo "nsis.path = ~/nsis-3.0-src/bin/makensis" > tools.properties
  - echo "launch4j.path = ~/launch4j" >> tools.properties
